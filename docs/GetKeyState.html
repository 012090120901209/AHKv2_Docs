<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GetKeyState | AutoHotkey v2 Documentation</title>
    <meta name="description" content="Returns 1 (true) or 0 (false) depending on whether the specified">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/markdown.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>
                <a href="/" class="navbar-brand">
                    <span class="logo-icon">âš¡</span>
                    <span class="logo-text">AutoHotkey v2</span>
                </a>
            </div>
            <div class="navbar-center">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off">
                    <kbd class="search-hint">Ctrl+K</kbd>
                </div>
            </div>
            <div class="navbar-right">
                <a href="https://github.com/012090120901209/AHKv2_Docs" class="nav-link" target="_blank" rel="noopener">
                    <i class="fab fa-github"></i>
                    <span>GitHub</span>
                </a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Search Results Dropdown -->
    <div class="search-results" id="searchResults" style="display: none;"></div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <!-- Category Navigation -->
                <div class="sidebar-section">
                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-book"></i>
                            <span>Getting Started</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/guides/Tutorial.html">Tutorial</a></li>
                            <li><a href="/guides/FAQ.html">FAQ</a></li>
                            <li><a href="/guides/Concepts.html">Concepts</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-code"></i>
                            <span>Functions</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/functions/string/">String Functions</a></li>
                            <li><a href="/functions/window/">Window Functions</a></li>
                            <li><a href="/functions/file/">File Operations</a></li>
                            <li><a href="/functions/system/">System Functions</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-cube"></i>
                            <span>Objects</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/objects/Array.html">Array</a></li>
                            <li><a href="/objects/Map.html">Map</a></li>
                            <li><a href="/objects/Object.html">Object</a></li>
                            <li><a href="/objects/Gui.html">Gui</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-hashtag"></i>
                            <span>Directives</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/directives/_Include.html">#Include</a></li>
                            <li><a href="/directives/_Requires.html">#Requires</a></li>
                            <li><a href="/directives/_HotIf.html">#HotIf</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-info-circle"></i>
                            <span>Reference</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/reference/KeyList.html">Key List</a></li>
                            <li><a href="/reference/Hotkeys.html">Hotkeys</a></li>
                            <li><a href="/reference/Variables.html">Variables</a></li>
                            <li><a href="/reference/Language.html">Language</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Breadcrumb -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="/">Home</a> <i class="fas fa-chevron-right"></i> <span>GetKeyState</span>
                </nav>

                <!-- Document Content -->
                <article class="markdown-body">
                    <h1 id="getkeystate">GetKeyState</h1>
<p>Returns 1 (true) or 0 (false) depending on whether the specified
keyboard key or mouse/controller button is down or up. Also retrieves
controller status.</p>
<pre class="codehilite"><code class="language-Syntax">IsDown := GetKeyState(KeyName , Mode)
</code></pre>

<h2 id="Parameters">Parameters</h2>
<dl>
<dt>KeyName</dt>
<dd>
<p>Type: <a href="../Concepts.htm#strings">String</a></p>
<p>This can be just about any single character from the keyboard or one
of the key names from the <a href="../KeyList.htm">key list</a>, such as a
mouse/controller button. Examples: B, 5, LWin, RControl, Alt, Enter,
Escape, LButton, MButton, Joy1.</p>
<p>Alternatively, an explicit virtual key code such as vkFF may be
specified. This is useful in the rare case where a key has no name.
The code of such a key can be determined by following the steps at
the bottom of the <a href="../KeyList.htm#SpecialKeys">key list page</a>. Note
that this code must be in hexadecimal.</p>
<p><strong>Known limitation:</strong> This function cannot differentiate between two
keys which share the same virtual key code, such as Left and
NumpadLeft.</p>
</dd>
<dt>Mode</dt>
<dd>
<p>Type: <a href="../Concepts.htm#strings">String</a></p>
<p>This parameter is ignored when retrieving controller status.</p>
<p>If omitted, it defaults to that which retrieves the logical state of
the key. This is the state that the OS and the active window believe
the key to be in, but is not necessarily the same as the physical
state.</p>
<p>Otherwise, specify one of the following letters:</p>
<p><strong>P:</strong> Retrieve the physical state (i.e. whether the user is
physically holding it down). The physical state of a key or mouse
button will usually be the same as the logical state unless the
keyboard and/or mouse hooks are installed, in which case it will
accurately reflect whether or not the user is physically holding
down the key or button (as long as it was pressed down while the
script was running). You can determine if your script is using the
hooks via the <a href="KeyHistory.htm">KeyHistory</a> function or menu item.
You can force the hooks to be installed by calling
<a href="InstallKeybdHook.htm">InstallKeybdHook</a> and/or
<a href="InstallMouseHook.htm">InstallMouseHook</a>.</p>
<p><strong>T:</strong> Retrieve the toggle state. For keys other than
[CapsLock]{.kbd}, [NumLock]{.kbd} and [ScrollLock]{.kbd}, the toggle
state is generally 0 when the script starts and is not synchronized
between processes.</p>
</dd>
</dl>
<h2 id="Return_Value">Return Value</h2>
<p>Type: <a href="../Concepts.htm#boolean">Integer (boolean)</a>,
<a href="../Concepts.htm#numbers">Float</a>, <a href="../Concepts.htm#numbers">Integer</a> or
<a href="../Concepts.htm#nothing">String (empty)</a></p>
<p>This function returns 1 (true) if the key is down (or toggled on) or 0
(false) if it is up (or toggled off).</p>
<p>When <em>KeyName</em> is a stick axis such as JoyX, this function returns a
floating-point number between 0 and 100 to indicate the stick\'s
position as a percentage of that axis\'s range of motion. This <a href="../scripts/index.htm#ControllerTest">test
script</a> can be used to analyze your
controller(s).</p>
<p>When <em>KeyName</em> is JoyPOV, this function returns an integer between 0 and
35900. The following approximate POV values are used by many
controllers:</p>
<ul>
<li>-1: no angle to report</li>
<li>0: forward POV</li>
<li>9000 (i.e. 90 degrees): right POV</li>
<li>27000 (i.e. 270 degrees): left POV</li>
<li>18000 (i.e. 180 degrees): backward POV</li>
</ul>
<p>When <em>KeyName</em> is JoyName, JoyButtons, JoyAxes or JoyInfo, the retrieved
value will be the name, number of buttons, number of axes or
capabilities of the controller. For details, see <a href="../KeyList.htm#Controller">Game
Controller</a>.</p>
<p>When <em>KeyName</em> is a button or control of a controller that could not be
detected, this function returns an empty string.</p>
<h2 id="Error_Handling">Error Handling</h2>
<p>A <a href="Error.htm#ValueError">ValueError</a> is thrown if invalid parameters are
detected, e.g. when <em>KeyName</em> does not exist on the current keyboard
layout.</p>
<h2 id="Remarks">Remarks</h2>
<p>To wait for a key or mouse/controller button to achieve a new state, it
is usually easier to use <a href="KeyWait.htm">KeyWait</a> instead of a GetKeyState
loop.</p>
<p>Systems with unusual keyboard drivers might be slow to update the state
of their keys, especially the toggle-state of keys like
[CapsLock]{.kbd}. A script that checks the state of such a key
immediately after it changed may use <a href="Sleep.htm">Sleep</a> beforehand to
give the system time to update the key state.</p>
<p>For examples of using GetKeyState with a controller, see the <a href="../misc/RemapController.htm">controller
remapping page</a> and the
<a href="../scripts/index.htm#ControllerMouse">Controller-To-Mouse script</a>.</p>
<h2 id="Related">Related</h2>
<p><a href="GetKeyVK.htm">GetKeyVK</a>, <a href="GetKeySC.htm">GetKeySC</a>,
<a href="GetKeyName.htm">GetKeyName</a>, <a href="KeyWait.htm">KeyWait</a>, <a href="../KeyList.htm">Key
List</a>, <a href="../misc/RemapController.htm">Controller
remapping</a>, <a href="KeyHistory.htm">KeyHistory</a>,
<a href="InstallKeybdHook.htm">InstallKeybdHook</a>,
<a href="InstallMouseHook.htm">InstallMouseHook</a></p>
<h2 id="Examples">Examples</h2>
<p>::: {#ExBasic .ex}
<a class="ex_number" href="#ExBasic"></a> Retrieves the current state of the right mouse
button.</p>
<pre class="codehilite"><code>state := GetKeyState(&quot;RButton&quot;)
</code></pre>

<p>:::</p>
<p>::: {#ExBasic2 .ex}
<a class="ex_number" href="#ExBasic2"></a> Retrieves the current state of the first
controller\'s second button.</p>
<pre class="codehilite"><code>state := GetKeyState(&quot;Joy2&quot;)
</code></pre>

<p>:::</p>
<p>::: {#ExIfElse .ex}
<a class="ex_number" href="#ExIfElse"></a> is down.} Checks if at least one [Shift]{.kbd</p>
<pre class="codehilite"><code>if GetKeyState(&quot;Shift&quot;)
    MsgBox &quot;At least one Shift key is down.&quot;
else
    MsgBox &quot;Neither Shift key is down.&quot;
</code></pre>

<p>:::</p>
<p>::: {#ExToggle .ex}
<a class="ex_number" href="#ExToggle"></a> Retrieves the current toggle state of
[CapsLock]{.kbd}.</p>
<pre class="codehilite"><code>state := GetKeyState(&quot;CapsLock&quot;, &quot;T&quot;)
</code></pre>

<p>:::</p>
<p>::: {#ExRemap .ex}
<a class="ex_number" href="#ExRemap"></a> Remapping. (This example is only for
illustration because it would be easier to use the <a href="../misc/Remap.htm">built-in remapping
feature</a>.) In the following hotkey, the mouse button
is kept held down while NumpadAdd is down, which effectively transforms
NumpadAdd into a mouse button. This method can also be used to repeat an
action while the user is holding down a key or button.</p>
<pre class="codehilite"><code>*NumpadAdd::
{
    MouseClick &quot;left&quot;,,, 1, 0, &quot;D&quot;  ; Hold down the left mouse button.
    Loop
    {
        Sleep 10
        if !GetKeyState(&quot;NumpadAdd&quot;, &quot;P&quot;)  ; The key has been released, so break out of the loop.
            break
        ; ... insert here any other actions you want repeated.
    }
    MouseClick &quot;left&quot;,,, 1, 0, &quot;U&quot;  ; Release the mouse button.
}
</code></pre>

<p>:::</p>
<p>::: {#ExController .ex}
<a class="ex_number" href="#ExController"></a> Makes controller button behavior depend on
stick axis position.</p>
<pre class="codehilite"><code>joy2::
{
    JoyX := GetKeyState(&quot;JoyX&quot;)
    if JoyX &gt; 75
        MsgBox &quot;Action #1 (button pressed while stick was pushed to the right).&quot;
    else if JoyX &lt; 25
        MsgBox &quot;Action #2 (button pressed while stick was pushed to the left).&quot;
    else
        MsgBox &quot;Action #3 (button pressed while stick was centered horizontally).&quot;
}
</code></pre>

<p>:::</p>
<p>See the <a href="../misc/RemapController.htm">controller remapping page</a> and the
<a href="../scripts/index.htm#ControllerMouse">Controller-To-Mouse script</a> for
other examples.</p>
                </article>

                <!-- Footer Navigation -->
                <div class="doc-pagination">
                    
                    
                </div>

                <!-- Edit on GitHub -->
                <div class="edit-page">
                    <a href="https://github.com/012090120901209/AHKv2_Docs/edit/main/GetKeyState.md" target="_blank" rel="noopener">
                        <i class="fas fa-edit"></i> Edit this page
                    </a>
                </div>
            </div>

            <!-- Table of Contents -->
            <aside class="toc">
                <div class="toc-wrapper">
                    <h3 class="toc-title">On this page</h3>
                    <nav id="tableOfContents">
                        <div class="toc">
<ul>
<li><a href="#getkeystate">GetKeyState</a><ul>
<li><a href="#Parameters">Parameters</a></li>
<li><a href="#Return_Value">Return Value</a></li>
<li><a href="#Error_Handling">Error Handling</a></li>
<li><a href="#Remarks">Remarks</a></li>
<li><a href="#Related">Related</a></li>
<li><a href="#Examples">Examples</a></li>
</ul>
</li>
</ul>
</div>

                    </nav>
                </div>
            </aside>
        </main>
    </div>

    <!-- Scripts -->
    <script src="/js/theme.js"></script>
    <script src="/js/sidebar.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/toc.js"></script>
    <script src="/js/syntax.js"></script>
</body>
</html>