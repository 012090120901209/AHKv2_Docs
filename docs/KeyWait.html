<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyWait | AutoHotkey v2 Documentation</title>
    <meta name="description" content="Waits for a key or mouse/controller button to be released or pressed">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/markdown.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>
                <a href="/" class="navbar-brand">
                    <span class="logo-icon">âš¡</span>
                    <span class="logo-text">AutoHotkey v2</span>
                </a>
            </div>
            <div class="navbar-center">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off">
                    <kbd class="search-hint">Ctrl+K</kbd>
                </div>
            </div>
            <div class="navbar-right">
                <a href="https://github.com/012090120901209/AHKv2_Docs" class="nav-link" target="_blank" rel="noopener">
                    <i class="fab fa-github"></i>
                    <span>GitHub</span>
                </a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Search Results Dropdown -->
    <div class="search-results" id="searchResults" style="display: none;"></div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <!-- Category Navigation -->
                <div class="sidebar-section">
                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-book"></i>
                            <span>Getting Started</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/guides/Tutorial.html">Tutorial</a></li>
                            <li><a href="/guides/FAQ.html">FAQ</a></li>
                            <li><a href="/guides/Concepts.html">Concepts</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-code"></i>
                            <span>Functions</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/functions/string/">String Functions</a></li>
                            <li><a href="/functions/window/">Window Functions</a></li>
                            <li><a href="/functions/file/">File Operations</a></li>
                            <li><a href="/functions/system/">System Functions</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-cube"></i>
                            <span>Objects</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/objects/Array.html">Array</a></li>
                            <li><a href="/objects/Map.html">Map</a></li>
                            <li><a href="/objects/Object.html">Object</a></li>
                            <li><a href="/objects/Gui.html">Gui</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-hashtag"></i>
                            <span>Directives</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/directives/_Include.html">#Include</a></li>
                            <li><a href="/directives/_Requires.html">#Requires</a></li>
                            <li><a href="/directives/_HotIf.html">#HotIf</a></li>
                        </ul>
                    </div>

                    <div class="sidebar-category">
                        <div class="category-header">
                            <i class="fas fa-info-circle"></i>
                            <span>Reference</span>
                        </div>
                        <ul class="category-items">
                            <li><a href="/reference/KeyList.html">Key List</a></li>
                            <li><a href="/reference/Hotkeys.html">Hotkeys</a></li>
                            <li><a href="/reference/Variables.html">Variables</a></li>
                            <li><a href="/reference/Language.html">Language</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Breadcrumb -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="/">Home</a> <i class="fas fa-chevron-right"></i> <span>KeyWait</span>
                </nav>

                <!-- Document Content -->
                <article class="markdown-body">
                    <h1 id="keywait">KeyWait</h1>
<p>Waits for a key or mouse/controller button to be released or pressed
down.</p>
<pre class="codehilite"><code class="language-Syntax">KeyWait KeyName , Options
</code></pre>

<h2 id="Parameters">Parameters</h2>
<dl>
<dt>KeyName</dt>
<dd>
<p>Type: <a href="../Concepts.htm#strings">String</a></p>
<p>This can be just about any single character from the keyboard or one
of the key names from the <a href="../KeyList.htm">key list</a>, such as a
mouse/controller button. Controller attributes other than buttons
are not supported.</p>
<p>An explicit virtual key code such as <code>vkFF</code> may also be specified.
This is useful in the rare case where a key has no name and produces
no visible character when pressed. Its virtual key code can be
determined by following the steps at the bottom of the <a href="../KeyList.htm#SpecialKeys">key list
page</a>.</p>
</dd>
<dt>Options</dt>
<dd>
<p>Type: <a href="../Concepts.htm#strings">String</a></p>
<p>If blank or omitted, the function will wait indefinitely for the
specified key or mouse/controller button to be physically released
by the user. However, if the <a href="InstallKeybdHook.htm">keyboard hook</a>
is not installed and <em>KeyName</em> is a keyboard key released
artificially by means such as the <a href="Send.htm">Send</a> function, the key
will be seen as having been physically released. The same is true
for mouse buttons when the <a href="InstallMouseHook.htm">mouse hook</a> is not
installed.</p>
<p>Otherwise, specify a string of one or more of the following options
(in any order, with optional spaces in between):</p>
<p><strong>D:</strong> Wait for the key to be pushed down.</p>
<p><strong>L:</strong> Check the logical state of the key, which is the state that
the OS and the active window believe the key to be in (not
necessarily the same as the physical state). This option is ignored
for controller buttons.</p>
<p><strong>T:</strong> Timeout (e.g. <code>T3</code>). The number of seconds to wait before
timing out and returning 0. If the key or button achieves the
specified state, the function will not wait for the timeout to
expire. Instead, it will immediately return 1.</p>
<p>The timeout value can be a floating point number such as 2.5, but it
should not be a hexadecimal value such as 0x03.</p>
</dd>
</dl>
<h2 id="Return_Value">Return Value</h2>
<p>Type: <a href="../Concepts.htm#boolean">Integer (boolean)</a></p>
<p>This function returns 0 (false) if the function timed out or 1 (true)
otherwise.</p>
<h2 id="Remarks">Remarks</h2>
<p>The physical state of a key or mouse button will usually be the same as
the logical state unless the keyboard and/or mouse hooks are installed,
in which case it will accurately reflect whether or not the user is
physically holding down the key. You can determine if your script is
using the hooks via the <a href="KeyHistory.htm">KeyHistory</a> function or menu
item. You can force either or both of the hooks to be installed by
adding the <a href="InstallKeybdHook.htm">InstallKeybdHook</a> and
<a href="InstallMouseHook.htm">InstallMouseHook</a> functions to the script.</p>
<p>While the function is in a waiting state, new
<a href="../misc/Threads.htm">threads</a> can be launched via
<a href="../Hotkeys.htm">hotkey</a>, <a href="Menu.htm">custom menu item</a>, or
<a href="SetTimer.htm">timer</a>.</p>
<p>To wait for two or more keys to be released, use KeyWait consecutively.
For example:</p>
<pre class="codehilite"><code>KeyWait &quot;Control&quot;  ; Wait for both Control and Alt to be released.
KeyWait &quot;Alt&quot;
</code></pre>

<p>To wait for any one key among a set of keys to be pressed down, see
<a href="InputHook.htm#ExAnyKey">InputHook example #4</a>.</p>
<h2 id="Related">Related</h2>
<p><a href="GetKeyState.htm">GetKeyState</a>, <a href="../KeyList.htm">Key List</a>,
<a href="InputHook.htm">InputHook</a>, <a href="KeyHistory.htm">KeyHistory</a>,
<a href="InstallKeybdHook.htm">InstallKeybdHook</a>,
<a href="InstallMouseHook.htm">InstallMouseHook</a>, <a href="ClipWait.htm">ClipWait</a>,
<a href="WinWait.htm">WinWait</a></p>
<h2 id="Examples">Examples</h2>
<p>::: {#ExBasic .ex}
<a class="ex_number" href="#ExBasic"></a> Waits for the A key to be released.</p>
<pre class="codehilite"><code>KeyWait &quot;a&quot;
</code></pre>

<p>:::</p>
<p>::: {#ExDown .ex}
<a class="ex_number" href="#ExDown"></a> Waits for the left mouse button to be pressed
down.</p>
<pre class="codehilite"><code>KeyWait &quot;LButton&quot;, &quot;D&quot;
</code></pre>

<p>:::</p>
<p>::: {#ExTimeout .ex}
<a class="ex_number" href="#ExTimeout"></a> Waits up to 3 seconds for the first
controller button to be pressed down.</p>
<pre class="codehilite"><code>KeyWait &quot;Joy1&quot;, &quot;D T3&quot;
</code></pre>

<p>:::</p>
<p>::: {#ExLogical .ex}
<a class="ex_number" href="#ExLogical"></a> Waits for the left Alt key to be logically
released.</p>
<pre class="codehilite"><code>KeyWait &quot;LAlt&quot;, &quot;L&quot;
</code></pre>

<p>:::</p>
<p>::: {#ExHotkey .ex}
<a class="ex_number" href="#ExHotkey"></a> When pressing this hotkey, KeyWait waits for
the user to physically release the CapsLock key. As a result, subsequent
statements are performed on release instead of press. This behavior is
similar to <code>~CapsLock up::</code>.</p>
<pre class="codehilite"><code>~CapsLock::
{
    KeyWait &quot;CapsLock&quot;  ; Wait for user to physically release it.
    MsgBox &quot;You pressed and released the CapsLock key.&quot;
}
</code></pre>

<p>:::</p>
<p>::: {#ExRemap .ex}
<a class="ex_number" href="#ExRemap"></a> Remaps a key or mouse button. (This example is
only for illustration because it would be easier to use the <a href="../misc/Remap.htm">built-in
remapping feature</a>.) In the following hotkey, the
mouse button is kept held down while NumpadAdd is down, which
effectively transforms NumpadAdd into a mouse button.</p>
<pre class="codehilite"><code>*NumpadAdd::
{
    MouseClick &quot;left&quot;,,, 1, 0, &quot;D&quot;  ; Hold down the left mouse button.
    KeyWait &quot;NumpadAdd&quot;  ; Wait for the key to be released.
    MouseClick &quot;left&quot;,,, 1, 0, &quot;U&quot;  ; Release the mouse button.
}
</code></pre>

<p>:::</p>
<p>::: {#ExDouble .ex}
<a class="ex_number" href="#ExDouble"></a> Detects when a key has been double-pressed
(similar to double-click). KeyWait is used to stop the keyboard\'s
auto-repeat feature from creating an unwanted double-press when you hold
down the RControl key to modify another key. It does this by keeping the
hotkey\'s thread running, which blocks the auto-repeats by relying upon</p>
<h1 id="maxthreadsperhotkey-being-at-its-default-setting-of-1-for-a-more">MaxThreadsPerHotkey being at its default setting of 1. For a more</h1>
<p>elaborate script that distinguishes between single, double and
triple-presses, see <a href="SetTimer.htm#ExampleCount">SetTimer example #3</a>.</p>
<pre class="codehilite"><code>~RControl::
{
    if (A_PriorHotkey != &quot;~RControl&quot; or A_TimeSincePriorHotkey &gt; 400)
    {
        ; Too much time between presses, so this isn't a double-press.
        KeyWait &quot;RControl&quot;
        return
    }
    MsgBox &quot;You double-pressed the right control key.&quot;
}
</code></pre>

<p>:::</p>
                </article>

                <!-- Footer Navigation -->
                <div class="doc-pagination">
                    
                    
                </div>

                <!-- Edit on GitHub -->
                <div class="edit-page">
                    <a href="https://github.com/012090120901209/AHKv2_Docs/edit/main/KeyWait.md" target="_blank" rel="noopener">
                        <i class="fas fa-edit"></i> Edit this page
                    </a>
                </div>
            </div>

            <!-- Table of Contents -->
            <aside class="toc">
                <div class="toc-wrapper">
                    <h3 class="toc-title">On this page</h3>
                    <nav id="tableOfContents">
                        <div class="toc">
<ul>
<li><a href="#keywait">KeyWait</a><ul>
<li><a href="#Parameters">Parameters</a></li>
<li><a href="#Return_Value">Return Value</a></li>
<li><a href="#Remarks">Remarks</a></li>
<li><a href="#Related">Related</a></li>
<li><a href="#Examples">Examples</a></li>
</ul>
</li>
<li><a href="#maxthreadsperhotkey-being-at-its-default-setting-of-1-for-a-more">MaxThreadsPerHotkey being at its default setting of 1. For a more</a></li>
</ul>
</div>

                    </nav>
                </div>
            </aside>
        </main>
    </div>

    <!-- Scripts -->
    <script src="/js/theme.js"></script>
    <script src="/js/sidebar.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/toc.js"></script>
    <script src="/js/syntax.js"></script>
</body>
</html>